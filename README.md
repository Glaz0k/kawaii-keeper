# kawaii-keeper

## Участники проекта:
- Демиденко Н. Д., гр. 5130904/30104
- Кравченко Н. В., гр. 5130904/30104
- Лебедев А. И., гр. 5130904/30104
- Пиявкин А. А., гр. 5130904/30104

## Определение проблемы
Ценителям аниме и просто любителям красивых картинок порой бывает проблематично найти источник, в котором будут собраны изображения с аниме почти на любой вкус, а также найти картинку, соответствующую какой-либо категории. Существующие решения на основе Discord ботов могут быть недоступны ряду пользователей по независящим от них причинам, а искать и открывать специализированные web-сайты не очень удобно.

## Выработка требований
Пользовательские сценарии:
1) Пользователь не знает о своих желаниях и хочет получить случайную аниме-картинку.
2) Пользователь знает, чего хочет, и запрашивает картинку из определенной категории (на выбор).
3) Пользователю понравилась определенная картинка и он хочет сохранить ее в свою коллекцию.

## Разработка архитектуры и детальное проектирование
Репозиторий: https://github.com/Glaz0k/kawaii-keeper

Технологический стек:
•	Язык для написания серверной части: Java (Spring)
•	База данных: PostgreSQL
•	UI: Telegram (java-telegram-bot-api https://github.com/pengrad/java-telegram-bot-api)

Внешняя зависимость: https://nekosia.cat/

Соотношение R/W нагрузки: 90% - чтение (просмотр новых картинок), 10% - запись (сохранение понравившихся картинок в коллекцию).
	Объемы трафика: 30 ГБ/месяц
	Объемы дисковой системы: 100 ГБ
	В связи с тем, что данный сервис подпадает под «Пакет Яровой», нам необходимо хранить переписки пользователей 1 год (3 года с 2026г). Однако поскольку на данном этапе наш сервис небольшой по охвату, о несоответствии законодательству можно не беспокоиться. Поэтому было принято решение не хранить переписку.

Конфигурация сервиса:
[](images/config.svg)

Диаграмма Level 1:
[](images/high-level.svg)

Диаграмма Level 2:
[](images/low-level.svg)

Схема базы данных:
[](images/database.svg)

SLA (Service Level Agreement):
Простой возможности отправки запроса картинки после аварии должен быть устранен за 1 неделю. В противном случае, поскольку сервис бесплатный, принесем публичные извинения и обязуемся отправить подходящую картинку как можно скорее.

## Тестирование
Общий отчет тестирования системы:
[](images/test-report.png)

1) CallbacksTest
Тестирует утилитный класс для работы с callback-данными Telegram inline-кнопок.
[](images/test-callbacks.png)

2) CategoryHandlerTest
Тестирует обработчик выбора пользователем категорий изображений.
[](images/test-category-handler.png)

3) ClearHandlerTest
Тестирует очистку коллекции сохранённых изображений.
[](images/test-clear-handler.png)

4) FeedHandlerTest
Тестирует ленту изображений
[](images/test-feed-handler.png)

5) SavedHandlerTest
Тестирует просмотр пользователем сохранённой коллекции изображений.
[](images/test-saved-handler.png)

6) CategoryServiceTest
Тестирует бизнес-логику работы с категориями.
[](images/test-category-service.png)

7) ImageServiceTest
Тестирует интеграцию с внешним API изображений.
[](images/test-image-service.png)

8) SavedServiceTest
Тестирует сервис работы с сохранёнными изображениями.
[](images/test-saved-service.png)

## Сборка
Для сборки проекта используется docker-compose. При запуске сервиса поднимаются два контейнера:
1) Backend
2) PostgreSQL
Для запуска проекта необходимо прописать:
`docker compose up -d`